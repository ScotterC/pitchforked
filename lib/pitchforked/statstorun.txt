Stats to Run

Reviews 

Total Reviews - Review.count 
Total Artists - Artist.count 
Total Labels - Label.count 

Average Rating - Review.average(:rating).to_f.round(2) 


Total BNMs - Review.bnm.count
% of Reviews that are BNMs - (((Review.bnm.count)/(Review.count).to_f)*100).round(2) 
Average Rating of BNM -  Review.bnm.average(:rating).to_f.round(2)
BNMs per year - Review.bnm.count(:group => 'year').each do |review|
                                      year, bnms = *review
                                      puts "#{year} - #{bnms}"
                                    end 

Authors - 

 

Top 10 BNM authors - Review.bnm.select("author, count(*) AS count").group("author").order("count DESC").limit(10).each do |review|
                                     puts "#{review.author} - #{review.count}"






Authors - Review.count(:group_by => author).count





Average Scores by Author - Average scores group by author

Artists 
Total Artists - Artists.count

Average Rating of bands with 'bear' in their name -

Review.joins(:album => :artist).where("artists.name like ?", "%bear%").average(:rating).to_f

SCOPE for accessing only BNM reviews 

in Reviews call

scope :bnm, where(:bnm => 1)

(((Review.bnm.count)/(Review.count).to_f)*100).round(2) = Percentage of Total Reviews that are BNM 

Record Labels

Total Record Labels - Labels.count
Avg score per Record Label - Review.joins(:album => :label).average(:rating, :group=>'labels.name').each do |label, avgscore|
                                     puts "#{label} with avg rating of #{avgscore.to_f}"
                              end


Top BNM'ed Record Labels (all with more than 2 BNM)

Review.bnm.select("labels.name, count(*) AS count").joins(:album => :label).having("count > ?", 2).group("labels.name").order("count DESC")



Band names: 

%black%
%bear%
%wolf%
%beach%
%magic%
%crystal%
%young%
%golden%


Review.joins(:album => :artist).where("artists.name like ? OR artists.name like ? OR artists.name like ? OR artists.name like ?", "%black%","%bear%","%beach%","%crystal%")

